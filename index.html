<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Marion &amp; Julien</title>
    <!--<link rel=“preload” href="assets/Bombshell Pro.woff" as="font">-->
    <!--<link rel=“preload” href="assets/archer-book-webfont.ttf" as="font">-->
    <style>
        @font-face {
            font-family: 'Bombshell Pro';
            font-style: normal;
            font-weight: normal;
            src: local('Bombshell Pro'), url('assets/Bombshell-Pro.ttf') format('truetype');
        }

        @font-face {
            font-family: 'archer book webfont';
            font-style: normal;
            font-weight: normal;
            src: local('archer book webfont'), url('assets/archer-book-webfont.ttf') format('truetype');
        }

        body {
            font-family: 'archer book webfont', serif;
        }

        input, textarea, select {
            font-family: 'archer book webfont', serif;
        }

        a {
            text-decoration: none;
            color: #000;
            /*text-transform: uppercase;*/
        }

        h1, h2 {
            font-family: 'Bombshell Pro', serif;
            font-weight: normal;
        }

        hr {
            display: block;
            height: 1px;
            border: 0;
            border-top: 1px solid black;
            margin: 1em 0;
            padding: 0;
            width: 100%;
        }

        .hidden {
            display: none;
        }

        .active {
            display: block;
        }

        .date {
            /*display: flex;*/
            /*flex-direction: column;*/
            /*align-items: center;< */
            text-align: center;
            margin-bottom: 1em;
        }

        .menu {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            align-items: center;
            padding: 0 1em 0 1em;
        }

        @media only screen and (max-width: 500px) {
            #img-form {
                display: none;
            }
        }

        /* media query pour mobile flex-direction: row*/

        ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        li {
            flex: 1 1 auto;
            flex-basis: auto;
        }

        .title {
            margin: auto;
            text-align: center;
        }

        .flex-11auto {
            flex: 1 1 auto;
            text-align: center;
        }

        .day-img {
            height: auto;
            width: 70px;
            margin-bottom: 1em;
        }

        .wedding-date {
            margin: 0;
        }

        .days {
            margin-top: 0;
            font-weight: bold;
        }

        .title-img {
            display: block;
            margin: auto;
            padding-bottom: 2em;
            height: 2em;
        }

        section > h1 {
            margin-bottom: 0
        }

        .flex-row-container {
            display: flex;
            flex-direction: row;
            align-items: center;
        }

        .flex-column-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Map */
        #container{position:relative;width:990px;margin:auto;}
        #container #map{width:500px;height:500px;margin:auto;}
    </style>
    <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function(){
        // switching sections according to the nav menu
        document.querySelectorAll(".menu a").forEach(function (a) {
            a.addEventListener("click", function (node) {
                var activeSection = document.querySelector("section[class='active']");
                activeSection.className = "hidden";

                var section = document.querySelector("section[id='" + node.currentTarget.dataset.name + "']");
                section.className = "active";
            });
        }, false);

        // Show difference days
        var diffDays = Math.ceil(Math.abs(new Date().getTime() - new Date("09/15/2017").getTime()) / (1000 * 3600 * 24));
        document.getElementsByClassName("days")[0].innerHTML = "J-" + diffDays;

        var form = document.getElementById("presence-form");
        form.addEventListener("submit", function(e) {
            if (e.preventDefault) e.preventDefault();

            var request = new XMLHttpRequest();
            var host = 'https://salty-ridge-13770.herokuapp.com';
    //        var host = 'http://localhost:8080';
            request.open("POST", host + "/api/form", true);
            request.setRequestHeader("Content-Type", "application/json");
            request.setRequestHeader("Authorization", "Basic bWFyaW9uOmd6cWJwcjdhOTAyOQ==");
    //        request.setRequestHeader("Authorization", "Basic bWFyaW9uOjYwMWQxMjJjLThlNWQtNGZjZC1hNGIxLTczODZmMDJiNzFlMA==");

            request.onreadystatechange = function() {
                if(request.readyState == 4 && request.status == 200) {
                    form.reset();
                    alert("Merci pour votre réponse \uD83D\uDC4C");
                }
            };

            request.send(JSON.stringify({
                firstname: document.getElementById("form-firstname").value,
                lastname: document.getElementById("form-lastname").value,
                email: document.getElementById("form-email").value,
                people: +document.getElementById("form-people").value,
                children: +document.getElementById("form-children").value,
                present: document.querySelector('input[name="form-present"]:checked').value
            }));

            return false;
        });
    });

    <!-- Google Maps Itineray -->
    var map;
    var panel;
    var direction;
    var initialize = function(){
        var latLng = new google.maps.LatLng(48.7739, 2.0360);
        var myOptions = {
            zoom      : 14, // Zoom par défaut
            center    : latLng,
            mapTypeId : google.maps.MapTypeId.TERRAIN,
            maxZoom   : 20
        };

        map = new google.maps.Map(document.getElementById('map'), myOptions);
        panel = document.getElementById('panel');

        direction = new google.maps.DirectionsRenderer({
            map   : map,
            panel : panel
        });

        var form = document.getElementById("destinationForm");
        form.addEventListener("submit", function(e) {
            if (e.preventDefault) e.preventDefault();

            var origin = document.getElementById('origin').value;
            var destination = document.getElementById('destination').value;
            if (origin && destination) {
                var request = {
                    origin: origin,
                    destination: destination,
                    travelMode: google.maps.DirectionsTravelMode.DRIVING
                };
                var directionsService = new google.maps.DirectionsService();
                directionsService.route(request, function (response, status) {
                    if (status == google.maps.DirectionsStatus.OK) {
                        direction.setDirections(response);
                    }
                });
            } //http://code.google.com/intl/fr-FR/apis/maps/documentation/javascript/reference.html#DirectionsRequest

            return false
        });
    };
    </script>
    <script async type="text/javascript" src="http://maps.google.com/maps/api/js?language=fr&key=AIzaSyAUNaNUA0eiDxbCzgWP8R_Q9HFMKyxBcRo&callback=initialize"></script>

</head>
<body>

<h1 class="title" style="text-align: center">Marion & Julien</h1>
<img src="assets/front.png" style="height:12em; display: block; margin: auto;">

<section class="date">
    <h3 class="wedding-date">15 Septembre 2017</h3>
    <span class="days"></span>
</section>

<hr>
<nav>
    <ul class="menu">
        <li class="first-nav-item"><a href="#" data-name="index">Accueil</a><img src="assets/nav.png" style="height:1em"></li>
        <li><a href="#" data-name="journee">Déroulement de la journée</a><img src="assets/nav.png" style="height:1em"></li>
        <li><a href="#" data-name="photos">Album photos</a><img src="assets/nav.png" style="height:1em"></li>
        <li><a href="#" data-name="hebergements">Hébergements</a><img src="assets/nav.png" style="height:1em"></li>
        <li><a href="#" data-name="acces">Plan d'accès</a><img src="assets/nav.png" style="height:1em"></li>
        <li><a href="#" data-name="presence">Confirmer ma présence</a><img src="assets/nav.png" style="height:1em"></li>
        <li><a href="#" data-name="voyage">Voyage de noce</a><img src="assets/nav.png" style="height:1em"></li>
    </ul>
</nav>
<hr>

<section id="index" class="active">
    <div class="flex-column-container">
        <h1 class="title">Accueil</h1>
        <img src="assets/accueil.png" class="title-img"/>
    </div>
</section>

<section id="journee" class="hidden">
    <div>
        <h1 class="title">Déroulement de la journée</h1>
        <img src="assets/accueil.png" class="title-img"/>
    </div>

    <div class="flex-column-container" style="margin-bottom: 1em;">
        <img src="assets/mariage.png" class="day-img">
        <div class="flex-column-container flex-11auto">
            <div style="font-size: 1.225em">Passage devant Mr le Maire à 14h</div>
            <div>66 rue de la Mare aux Carats, 78180 Montigny-Le-Bretonneux</div>
        </div>
    </div>
    <div class="flex-column-container" style="margin-bottom: 1em;">
        <img src="assets/eglise.png" class="day-img">
        <div class="flex-column-container flex-11auto">
            <div style="font-size: 1.225em">Mariage à l'église à 15h</div>
            <div>Eglise Saint Martin, 4 rue Saint Martin, 78180 Montigny-Le-Bretonneux</div>
        </div>
    </div>
    <div class="flex-column-container" style="margin-bottom: 1em;">
        <img src="assets/cocktail.png" class="day-img">
        <div class="flex-column-container flex-11auto">
            <div style="font-size: 1.225em">Cocktail à 18h</div>
            <div>Domaine de la Butte Ronde, Chemin de l'Abime, 78125 La Boissière-Ecole</div>
        </div>
    </div>
    <div class="flex-column-container" style="margin-bottom: 1em;">
        <img src="assets/repas.png" class="day-img">
        <div class="flex-column-container flex-11auto">
            <div style="font-size: 1.225em">Repas à 20h</div>
            <div>Domaine de la Butte Ronde, Chemin de l'Abime, 78125 La Boissière-Ecole</div>
        </div>
    </div>
    <div class="flex-column-container" style="margin-bottom: 1em;">
        <img src="assets/party.png" class="day-img">
        <div class="flex-column-container flex-11auto">
            <div style="font-size: 1.225em">PartyTime à 23h30</div>
        </div>
    </div>
</section>

<section id="photos" class="hidden">
    <div class="flex-column-container">
        <h1 class="title">Photos</h1>
        <img src="assets/accueil.png" class="title-img"/>
    </div>
</section>

<section id="hebergements" class="hidden">
    <div class="flex-column-container">
        <h1 class="title">Hébergements</h1>
        <img src="assets/accueil.png" class="title-img"/>
    </div>
</section>

<section id="acces" class="hidden">
    <div class="flex-column-container">
        <h1 class="title">Plan et itinéraire</h1>
        <img src="assets/accueil.png" class="title-img"/>
        <div id="container" class="flex-column-container">
            <div id="destinationForm">
                <form action="" method="get" name="direction" id="direction" style="text-align: center; margin-bottom: 2em;">
                    <label>Point de départ :</label>
                    <input type="text" name="origin" id="origin" placeholder="Choisissez une adresse de départ" required>
                    <label>Destination :</label>
                    <select id="destination" name="destination">
                        <option value="66 rue de la Mare aux Carats, 78180 Montigny-Le-Bretonneux">Marie de Montigny-Le-Bretonneux</option>
                        <option value="Eglise Saint Martin, 4 rue Saint Martin, 78180 Montigny-Le-Bretonneux">Eglise Saint Martin</option>
                        <option value="Domaine de la Butte Ronde, Chemin de l'Abime, 78125 La Boissière-Ecole">Domaine de la Butte Ronde</option>
                    </select>
                    <input type="submit" value="Voir l'itinéraire !">
                </form>
            </div>
            <div id="map">
                <p>Chargement de la carte...</p>
            </div>
            <div id="panel"></div>
        </div>
    </div>
</section>

<section id="presence" class="hidden">
    <h1 class="title">Merci de nous confirmer votre présence avec le formulaire ci-dessous</h1>
    <div class="flex-row-container" style="justify-content: center;">
        <form id="presence-form">
            <label>
                Nom<br>
                <input id="form-lastname" type="text" required/>
            </label>
            <br>
            <label>
                Prénom<br>
                <input id="form-firstname" type="text" required/>
            </label>
            <br>
            <label>
                Email<br>
                <input id="form-email" type="email" required>
            </label>
            <br>
            <label>
                Nombre de personnes<br>
                <input id="form-people" type="number" min="1" required>
            </label>
            <br>
            <label>
                Dont enfants de moins de 10 ans<br>
                <input id="form-children" type="number" min="0" required>
            </label>
            <br>
            <input name="form-present" type="radio" value="cocktail" required/>Assistera avec joie au cocktail<br/>
            <input name="form-present" type="radio" value="cocktail+diner" required>Assistera avec joie au cocktail et au
            diner<br/>
            <input name="form-present" type="radio" value="Ne viendra pas" required>Regrette de ne pouvoir être là<br/>
            <br>
            <input type="submit" value="Valider">
        </form>
        <img src="assets/formulaire.png" style="max-height: 28em" id="img-form">
    </div>
</section>

<section id="voyage" class="hidden">
    <div class="flex-column-container">
        <h1 class="title">Voyage de noce</h1>
        <img src="assets/accueil.png" class="title-img"/>
    </div>
</section>
</body>
</html>
